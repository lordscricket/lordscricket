name: Create Release with ZIP

on: [push]
  push:
    tags:
      - '*'  # Triggers on any tag push, e.g., git push origin v1.0

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: write  # Required for creating releases and uploading assets

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Zip the public folder
        uses: thedoctor0/zip-release@0.7.6
        with:
          type: zip
          filename: lords-cricket-site_release-${{ github.ref_name }}.zip
          path: public  # Zips the entire public folder from the repo root
          # exclusions: '*.git* /*node_modules/* .editorconfig'  # Uncomment if needed

      - name: Create release and upload ZIP
        uses: ncipollo/release-action@v1.12.0
        with:
          artifacts: lords-cricket-site_release-${{ github.ref_name }}.zip  # Path to the ZIP created in the previous step
          token: ${{ secrets.GITHUB_TOKEN }}  # Securely uses the runtime-generated token
          # Optional: bodyFile: path/to/release-notes.md  # If you want a custom release body from a file
          # Optional: generateReleaseNotes: true  # Auto-generate release notes
          # Optional: draft: true  # Mark as draft release
          # Optional: prerelease: true  # Mark as pre-release
